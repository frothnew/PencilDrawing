!function(a){var b={speed:0,interaction:true,size:2,count:200,opacity:0,color:"#ffffff",windPower:0,image:false};a.fn.let_it_snow=function(n){var h=a.extend({},b,n),d=a(this),k=[],e=d.get(0),m=e.getContext("2d"),j=h.count,g=-100,f=-100;e.width=window.innerWidth;e.height=window.innerHeight;(function(){var o=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(p){window.setTimeout(p,1000/60)};window.requestAnimationFrame=o})();function c(){m.clearRect(0,0,e.width,e.height);for(var E=0;E<j;E++){var H=k[E],w=g,v=f,p=100,F=H.x,t=H.y;var D=Math.sqrt((F-w)*(F-w)+(t-v)*(t-v)),A=F-w,z=t-v;if(D<p){var r=p/(D*D),G=(w-F)/D,B=(v-t)/D,I=r/2;H.velX-=I*G;H.velY-=I*B}else{H.velX*=0.98;if(H.velY<=H.speed){H.velY=H.speed}switch(h.windPower){case false:H.velX+=Math.cos(H.step+=0.05)*H.stepSize;break;case 0:H.velX+=Math.cos(H.step+=0.05)*H.stepSize;break;default:H.velX+=0.01+(h.windPower/100)}}var C=h.color;var u=/^#([\da-fA-F]{2})([\da-fA-F]{2})([\da-fA-F]{2})$/;var q=u.exec(C);var o=parseInt(q[1],16)+","+parseInt(q[2],16)+","+parseInt(q[3],16);H.y+=H.velY;H.x+=H.velX;if(H.y>=e.height||H.y<=0){i(H)}if(H.x>=e.width||H.x<=0){i(H)}if(h.image==false){m.fillStyle="rgba("+o+","+H.opacity+")";m.beginPath();m.arc(H.x,H.y,H.size,0,Math.PI*2);m.fill()}else{m.drawImage(a("img#lis_flake").get(0),H.x,H.y,H.size*2,H.size*2)}}requestAnimationFrame(c)}function i(p){if(h.windPower==false||h.windPower==0){p.x=Math.floor(Math.random()*e.width);p.y=0}else{if(h.windPower>0){var q=Array(Math.floor(Math.random()*e.width),0);var o=Array(0,Math.floor(Math.random()*e.height));var r=Array(q,o);var s=r[Math.floor(Math.random()*r.length)];p.x=s[0];p.y=s[1]}else{var q=Array(Math.floor(Math.random()*e.width),0);var o=Array(e.width,Math.floor(Math.random()*e.height));var r=Array(q,o);var s=r[Math.floor(Math.random()*r.length)];p.x=s[0];p.y=s[1]}}p.size=(Math.random()*3)+h.size;p.speed=(Math.random()*1)+h.speed;p.velY=p.speed;p.velX=0;p.opacity=(Math.random()*0.5)+h.opacity}function l(){for(var r=0;r<j;r++){var o=Math.floor(Math.random()*e.width),t=Math.floor(Math.random()*e.height),q=(Math.random()*3)+h.size,s=(Math.random()*1)+h.speed,p=(Math.random()*0.5)+h.opacity;k.push({speed:s,velY:s,velX:0,x:o,y:t,size:q,stepSize:(Math.random())/30,step:0,angle:180,opacity:p})}c()}if(h.image!=false){a("<img src='"+h.image+"' style='display: none' id='lis_flake'>").prependTo("body")}l();a(window).resize(function(){if(this.resizeTO){clearTimeout(this.resizeTO)}this.resizeTO=setTimeout(function(){el2=d.clone();el2.insertAfter(d);d.remove();el2.let_it_snow(h)},200)});if(h.interaction==true){e.addEventListener("mousemove",function(o){g=o.clientX,f=o.clientY})}}}(window.jQuery);